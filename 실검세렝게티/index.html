<!doctype html>
<html lang="ko">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>

<body class="container">
    <article class="start">
        <h1 class="mt-5 text-center"> 나랑 꼭 닮은 세렝게티 동물은?</h1>
        <button type="button" class="btn btn-success mt-5" onclick="start();">테스트시작하기</button>
    </article>

    <article class="question">
        <div class="progress" role="progressbar" aria-label="Basic example" aria-valuenow="0" aria-valuemin="0"
            aria-valuemax="100">
            <div class="progress-bar" style="width: 0%"></div>
        </div>
        <h2 id="title" class="text-center"> 문제 </h2>
        <input id="type" type="hidden" value="EI">
        <button id="A" type="button" class="btn btn-primary mt-5">Primary</button>
        <button id="B" type="button" class="btn btn-primary mt-5">Primary</button>
    </article>
    <article class="result">
        <img id="img" src="./lion.jpg" alt="사자" class="rounded-circle mt-5">
        <h2 id="animal" class="text-center mt-5"> 동물이름 </h2>
        <h3 id="explain" class="text-center mt-5"> 설명 </h3>
    </article>
    <input type="hidden" id="EI" value="0">
    <input type="hidden" id="SN" value="0">
    <input type="hidden" id="TF" value="0">
    <input type="hidden" id="JP" value="0">








    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-qKXV1j0HvMUeCBQ+QVp7JcfGl760yU08IQ+GpUo5hlbpg51QRiuqHAJz8+BrxE/N"
        crossorigin="anonymous"></script>
    <script>
        var num = 1;
        var q = {
            1: { "title": "문제 1번", "type": "EI", "A": "E", "B": "I" },
            2: { "title": "문제 2번", "type": "EI", "A": "E", "B": "I" },
            3: { "title": "문제 3번", "type": "EI", "A": "E", "B": "I" },

            4: { "title": "문제 4번", "type": "SN", "A": "S", "B": "N" },
            5: { "title": "문제 5번", "type": "SN", "A": "S", "B": "N" },
            6: { "title": "문제 6번", "type": "SN", "A": "S", "B": "N" },

            7: { "title": "문제 7번", "type": "TF", "A": "T", "B": "F" },
            8: { "title": "문제 8번", "type": "TF", "A": "T", "B": "F" },
            9: { "title": "문제 9번", "type": "TF", "A": "T", "B": "F" },

            10: { "title": "문제 10번", "type": "JP", "A": "J", "B": "P" },
            11: { "title": "문제 11번", "type": "JP", "A": "J", "B": "P" },
            12: { "title": "문제 12번", "type": "JP", "A": "J", "B": "P" },
        }

        var result = {
            "ISTJ" :{ "animal":"하마", "explain": "하마설명", "img":"./lion.jpg"},
            "ENFP" :{ "animal": "사자", "explain": "사자설명", "img":"./lion.jpg"},
            "ENTJ" :{ "animal":"호랑이", "explain": "호랑이설명", "img":"./lion.jpg"},
            "ISTJ" :{ "animal":"하마", "explain": "하마설명", "img":"lion.jpg"},
            "ISTJ" :{ "animal":"하마", "explain": "하마설명", "img":"lion.jpg"},
            "ISTJ" :{ "animal":"하마", "explain": "하마설명", "img":"lion.jpg"},
            "ISTJ" :{ "animal":"하마", "explain": "하마설명", "img":"lion.jpg"},
            "ISTJ" :{ "animal":"하마", "explain": "하마설명", "img":"lion.jpg"},
            "ISTJ" :{ "animal":"하마", "explain": "하마설명", "img":"lion.jpg"},
            "ISTJ" :{ "animal":"하마", "explain": "하마설명", "img":"lion.jpg"},
        }
        function start() {
            $(".start").hide();
            $('.question').show();
            next();
        }
        $("#A").click(function () {
            var type = $("#type").val();
            var preValue = $("#" + type).val();
            $("#" + type).val(parseInt(preValue) + 1);
            next();
        });

        $("#B").click(function () {
            next();
        });

        function next() {


            // 마지막문제일때
            if (num == 13) {
                $('.question').hide();
                $(".result").show();
                var mbti = "";

                ($("#EI").val() < 2) ? mbti += "I"  : mbti += "E";
                ($("#SN").val() < 2) ? mbti += "N"  : mbti += "S";
                ($("#TF").val() < 2) ? mbti += "F"  : mbti += "T";
                ($("#JP").val() < 2) ? mbti += "P"  : mbti += "J";
                    // == 
                // if($("#EI").val() < 2){
                //     mbti = mbti + "I";
                // }else{
                //     mbti = mbti + "E";
                // }

                alert(mbti);
                $("#img").attr('src',result[mbti]["img"]);
                $("animal").html(result[mbti]["animal"]);
                $("explain").html(result[mbti]["explain"]);

            } else {
                // 문제들이 진행될때
                $('.progress-bar').attr('style', 'width: calc(100/12*' + num + '%)');
                $('#title').html(q[num]["title"]);
                $("#type").val(q[num]["type"]);
                $("#A").html(q[num]["A"]);
                $("#B").html(q[num]["B"]);
                num++;
            }
        }
    </script>

</body>

</html>